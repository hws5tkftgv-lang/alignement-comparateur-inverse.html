<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Alignement â€“ Comparateur inversÃ©</title>

<style>
:root{
  --bg:#0b1436;
  --panel:#121c4d;
  --text:#eaf1ff;
  --muted:#aab3ff;
  --ok:#4caf50;
  --bad:#ff5252;
  --btn:#1c2b6a;
}
*{box-sizing:border-box}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:Arial,system-ui,sans-serif;
}
header{
  padding:12px 16px;
  font-size:18px;
  font-weight:700;
}
.section{
  background:var(--panel);
  margin:12px;
  padding:12px;
  border-radius:12px;
}
h2{
  margin:0 0 8px 0;
  font-size:15px;
}
label{
  font-size:12px;
  color:var(--muted);
  display:block;
  margin-top:6px;
}
input, select{
  width:100%;
  padding:8px;
  margin-top:4px;
  border-radius:8px;
  border:none;
  font-size:14px;
}
button{
  background:var(--btn);
  color:#fff;
  border:none;
  padding:10px;
  border-radius:10px;
  font-size:14px;
  cursor:pointer;
}
button:disabled{
  opacity:.4;
}
.row{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:8px;
}
.result{
  margin-top:10px;
  font-size:14px;
  line-height:1.4;
}
.ok{color:var(--ok);font-weight:700}
.bad{color:var(--bad);font-weight:700}
.step-lock{
  opacity:.35;
  pointer-events:none;
}
</style>
</head>

<body>

<header>ðŸ”§ Alignement â€“ Comparateur inversÃ© (mils)</header>

<!-- ================= Ã‰TAPE 0 ================= -->
<div class="section" id="step0">
  <h2>Ã‰tape 0 â€” Configuration</h2>

  <label>Machine fixe</label>
  <select id="fixedMachine">
    <option value="motor">Moteur</option>
    <option value="pump">Pompe</option>
  </select>

  <label>UnitÃ©</label>
  <input value="mils" disabled>
</div>

<!-- ================= Ã‰TAPE 1 ================= -->
<div class="section" id="step1">
  <h2>Ã‰tape 1 â€” VÃ©rification du voilage</h2>

  <div class="row">
    <div>
      <label>Lecture max (mils)</label>
      <input id="runoutMax" type="number">
    </div>
    <div>
      <label>Lecture min (mils)</label>
      <input id="runoutMin" type="number">
    </div>
  </div>

  <button onclick="checkRunout()">Valider le voilage</button>
  <div class="result" id="runoutResult"></div>
</div>

<!-- ================= Ã‰TAPE 2 ================= -->
<div class="section step-lock" id="step2">
  <h2>Ã‰tape 2 â€” Pied boiteux</h2>

  <label>Variation max mesurÃ©e (mils)</label>
  <input id="softFoot" type="number">

  <button onclick="checkSoftFoot()">Valider pied boiteux</button>
  <div class="result" id="softFootResult"></div>
</div>

<!-- ================= Ã‰TAPE 3 ================= -->
<div class="section step-lock" id="step3">
  <h2>Ã‰tape 3 â€” AngularitÃ© verticale</h2>

  <div class="row">
    <div>
      <label>Lecture 12h (mils)</label>
      <input id="angV12" type="number">
    </div>
    <div>
      <label>Lecture 6h (mils)</label>
      <input id="angV6" type="number">
    </div>
  </div>

  <label>Distance entre comparateurs (po)</label>
  <input id="distCouplingV" type="number">

  <label>Distance pied avant (po)</label>
  <input id="distFrontFootV" type="number">

  <button onclick="calcAngularVertical()">Calculer correction</button>
  <div class="result" id="angVResult"></div>
</div>

<script>
/* ================= Ã‰TAT GLOBAL ================= */
let stepUnlocked = {
  runout:false,
  softfoot:false,
  angV:false
};

/* ================= Ã‰TAPE 1 ================= */
function checkRunout(){
  const max = Number(runoutMax.value);
  const min = Number(runoutMin.value);

  if(isNaN(max)||isNaN(min)){
    runoutResult.innerHTML = "<span class='bad'>Valeurs invalides</span>";
    return;
  }

  const total = Math.abs(max - min);

  if(total <= 2){
    runoutResult.innerHTML =
      `<span class="ok">Voilage acceptable (${total.toFixed(2)} mils)</span>`;
    unlockStep(2);
  }else{
    runoutResult.innerHTML =
      `<span class="bad">Voilage excessif (${total.toFixed(2)} mils)</span>`;
  }
}

/* ================= Ã‰TAPE 2 ================= */
function checkSoftFoot(){
  const sf = Number(softFoot.value);
  if(isNaN(sf)){
    softFootResult.innerHTML = "<span class='bad'>Valeur invalide</span>";
    return;
  }

  if(sf <= 2){
    softFootResult.innerHTML =
      `<span class="ok">Pied boiteux corrigÃ© (${sf.toFixed(2)} mils)</span>`;
    unlockStep(3);
  }else{
    softFootResult.innerHTML =
      `<span class="bad">Pied boiteux prÃ©sent (${sf.toFixed(2)} mils)</span>`;
  }
}

/* ================= Ã‰TAPE 3 ================= */
function calcAngularVertical(){
  const v12 = Number(angV12.value);
  const v6  = Number(angV6.value);
  const D   = Number(distCouplingV.value);
  const F   = Number(distFrontFootV.value);

  if([v12,v6,D,F].some(isNaN)){
    angVResult.innerHTML = "<span class='bad'>Valeurs manquantes</span>";
    return;
  }

  const delta = v12 - v6;
  const slope = delta / D;
  const correctionFront = slope * F;

  angVResult.innerHTML = `
    Î” lecture = ${delta.toFixed(2)} mils<br>
    Correction pied avant = <b>${correctionFront.toFixed(2)} mils</b>
  `;
}

/* ================= UTIL ================= */
function unlockStep(n){
  document.getElementById("step"+n).classList.remove("step-lock");
}
</script>

</body>
</html>