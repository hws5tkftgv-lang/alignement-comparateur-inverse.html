<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="Alignement">
<title>Alignement ‚Äì Comparateur invers√©</title>

<style>
:root{
  --bg:#0b1436;
  --card:#121c4a;
  --ok:#4caf50;
  --bad:#ff5252;
  --accent:#00a2ff;
}

body{
  margin:0;
  font-family:Arial, system-ui, sans-serif;
  background:var(--bg);
  color:#eaf1ff;
}

header{
  padding:14px;
  font-size:18px;
  font-weight:bold;
  text-align:center;
}

.step{
  background:var(--card);
  margin:12px;
  padding:14px;
  border-radius:14px;
}

.step h2{
  margin:0 0 8px;
  font-size:16px;
}

.step p{
  font-size:13px;
  opacity:0.9;
}

input{
  width:100%;
  padding:10px;
  font-size:16px;
  margin-top:6px;
  border-radius:10px;
  border:none;
}

button{
  width:100%;
  margin-top:10px;
  padding:12px;
  font-size:16px;
  border:none;
  border-radius:12px;
  background:var(--accent);
  color:white;
}

.status{
  margin-top:8px;
  font-weight:bold;
}

.ok{ color:var(--ok); }
.bad{ color:var(--bad); }

.locked{
  opacity:0.4;
  pointer-events:none;
}

#alignView{
  width:100%;
  height:220px;
  background:#000;
  border-radius:14px;
  display:block;
}


</style>
</head>

<body>

<header>Alignement ‚Äì Comparateur invers√© (mils)</header>

<!-- √âTAPE 1 -->
<div class="step" id="step1">
  <h2>1Ô∏è‚É£ V√©rification du voilage</h2>
  <p>Valider que les arbres sont acceptables avant l‚Äôalignement.</p>
  <button onclick="validateStep(1)">Voilage OK</button>
  <div class="status" id="status1"></div>
</div>

<!-- √âTAPE 2 -->
<div class="step locked" id="step2">
  <h2>2Ô∏è‚É£ Correction du pied boiteux</h2>
  <p>Entrer les lectures max-min (mils).</p>
  <input id="softFoot" type="number" placeholder="Diff√©rence mesur√©e (mils)">
  <button onclick="validateSoftFoot()">Valider pied boiteux</button>
  <div class="status" id="status2"></div>
</div>

<!-- √âTAPE 3 -->
<div class="step locked" id="step3">
  <h2>3Ô∏è‚É£ Angularit√© verticale (12h‚Äì6h)</h2>
  <p>Lecture au comparateur (mils).</p>
  <input id="angV" type="number" placeholder="Lecture (mils)">
  <button onclick="validateStep(3)">Valider</button>
  <div class="status" id="status3"></div>
</div>

<!-- √âTAPE 4 -->
<div class="step locked" id="step4">
  <h2>4Ô∏è‚É£ Parall√©lisme vertical</h2>
  <input id="parV" type="number" placeholder="Lecture (mils)">
  <button onclick="validateStep(4)">Valider</button>
  <div class="status" id="status4"></div>
</div>

<!-- √âTAPE 5 -->
<div class="step locked" id="step5">
  <h2>5Ô∏è‚É£ Angularit√© horizontale (3h‚Äì9h)</h2>
  <input id="angH" type="number" placeholder="Lecture (mils)">
  <button onclick="validateStep(5)">Valider</button>
  <div class="status" id="status5"></div>
</div>

<!-- √âTAPE 6 -->
<div class="step locked" id="step6">
  <h2>6Ô∏è‚É£ Parall√©lisme horizontal</h2>
  <input id="parH" type="number" placeholder="Lecture (mils)">
  <button onclick="validateStep(6)">Valider</button>
  <div class="status" id="status6"></div>
</div>

<div class="step">
  <h2>üîß Vue moteur & pompe</h2>
  <p>Vue p√©dagogique ‚Äì moteur mobile / pompe fixe</p>
  <canvas id="alignView"></canvas>
</div>

<script>
const state = {
  step: 1
};

function unlock(step){
  document.getElementById("step"+step).classList.remove("locked");
}

function validateStep(step){
  document.getElementById("status"+step).innerHTML =
    "<span class='ok'>‚úî √âtape valid√©e</span>";
  unlock(step+1);
}

function validateSoftFoot(){
  const v = parseFloat(document.getElementById("softFoot").value);
  if(isNaN(v)){
    document.getElementById("status2").innerHTML =
      "<span class='bad'>Valeur invalide</span>";
    return;
  }

  if(v <= 3){
    document.getElementById("status2").innerHTML =
      "<span class='ok'>‚úî Pied boiteux corrig√©</span>";
    unlock(3);
  }else{
    document.getElementById("status2").innerHTML =
      "<span class='bad'>‚ùå Hors tol√©rance (&gt; 3 mils)</span>";
  }
}

const alignCanvas = document.getElementById("alignView");
const alignCtx = alignCanvas.getContext("2d");

function resizeAlignView(){
  const dpr = Math.min(3, window.devicePixelRatio || 1);
  const w = alignCanvas.clientWidth;
  const h = alignCanvas.clientHeight;

  alignCanvas.width  = Math.round(w * dpr);
  alignCanvas.height = Math.round(h * dpr);
  alignCtx.setTransform(dpr,0,0,dpr,0,0);
}

function drawMachine(x, y, w, h, color, label){
  // corps
  alignCtx.fillStyle = color;
  alignCtx.fillRect(x, y, w, h);

  // pattes (4)
  const footW = 16;
  const footH = 8;

  alignCtx.fillRect(x+10,        y+h, footW, footH);
  alignCtx.fillRect(x+w-26,      y+h, footW, footH);
  alignCtx.fillRect(x+10,        y-8, footW, footH);
  alignCtx.fillRect(x+w-26,      y-8, footW, footH);

  // label
  alignCtx.fillStyle = "#eaf1ff";
  alignCtx.font = "12px Arial";
  alignCtx.textAlign = "center";
  alignCtx.fillText(label, x+w/2, y-14);
}

function drawAlignmentView(){
  resizeAlignView();

  const W = alignCanvas.width / (window.devicePixelRatio || 1);
  const H = alignCanvas.height / (window.devicePixelRatio || 1);

  alignCtx.clearRect(0,0,W,H);

  // dimensions machines
  const machineW = 110;
  const machineH = 50;

  const centerY
</script>

</body>
</html>